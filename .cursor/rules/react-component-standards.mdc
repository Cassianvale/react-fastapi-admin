# React ç»„ä»¶å¼€å‘è§„èŒƒ

## ğŸ¯ ç»„ä»¶å¼€å‘åŸåˆ™

### 1. å‡½æ•°å¼ç»„ä»¶ä¼˜å…ˆ

- ä½¿ç”¨å‡½æ•°å¼ç»„ä»¶ + Hooksï¼Œé¿å…ç±»ç»„ä»¶
- åˆ©ç”¨ React 18 çš„æ–°ç‰¹æ€§å’Œæ€§èƒ½ä¼˜åŒ–

```jsx
// âœ… æ¨èï¼šå‡½æ•°å¼ç»„ä»¶
const UserProfile = ({ userId, onUpdate }) => {
  const [user, setUser] = useState(null);

  useEffect(() => {
    fetchUser(userId).then(setUser);
  }, [userId]);

  return <div>{/* ç»„ä»¶å†…å®¹ */}</div>;
};

// âŒ é¿å…ï¼šç±»ç»„ä»¶
class UserProfile extends Component {
  // ...
}
```

### 2. å•ä¸€èŒè´£åŸåˆ™

- æ¯ä¸ªç»„ä»¶ä¸“æ³¨äºä¸€ä¸ªç‰¹å®šåŠŸèƒ½
- ç»„ä»¶åº”è¯¥æ˜“äºç†è§£å’Œç»´æŠ¤
- å½“ç»„ä»¶å˜å¾—å¤æ‚æ—¶ï¼Œè€ƒè™‘æ‹†åˆ†

### 3. Props æ¥å£è®¾è®¡

- æ˜ç¡®å®šä¹‰ç»„ä»¶çš„è¾“å…¥è¾“å‡º
- ä½¿ç”¨ PropTypes æˆ– TypeScript è¿›è¡Œç±»å‹æ£€æŸ¥
- ä¸ºå¯é€‰ props æä¾›é»˜è®¤å€¼

```jsx
const Button = ({
  children,
  type = "primary",
  size = "middle",
  loading = false,
  onClick,
  disabled = false,
  ...restProps
}) => {
  return (
    <AntButton
      type={type}
      size={size}
      loading={loading}
      onClick={onClick}
      disabled={disabled}
      {...restProps}
    >
      {children}
    </AntButton>
  );
};
```

## ğŸ”§ Hooks ä½¿ç”¨è§„èŒƒ

### 1. çŠ¶æ€ç®¡ç†

- ä½¿ç”¨ `useState` ç®¡ç†ç»„ä»¶å±€éƒ¨çŠ¶æ€
- ä½¿ç”¨ `useReducer` å¤„ç†å¤æ‚çŠ¶æ€é€»è¾‘
- åˆç†æ‹†åˆ†çŠ¶æ€ï¼Œé¿å…å·¨å¤§çš„çŠ¶æ€å¯¹è±¡

```jsx
// âœ… æ¨èï¼šæ‹†åˆ†çŠ¶æ€
const [user, setUser] = useState(null);
const [loading, setLoading] = useState(false);
const [error, setError] = useState(null);

// âŒ é¿å…ï¼šå·¨å¤§çš„çŠ¶æ€å¯¹è±¡
const [state, setState] = useState({
  user: null,
  loading: false,
  error: null,
  // ... æ›´å¤šçŠ¶æ€
});
```

### 2. å‰¯ä½œç”¨å¤„ç†

- ä½¿ç”¨ `useEffect` å¤„ç†å‰¯ä½œç”¨
- æ­£ç¡®è®¾ç½®ä¾èµ–æ•°ç»„
- æ¸…ç†å‰¯ä½œç”¨ï¼Œé¿å…å†…å­˜æ³„æ¼

```jsx
useEffect(() => {
  const controller = new AbortController();

  fetchData(controller.signal).then(setData).catch(setError);

  // æ¸…ç†å‡½æ•°
  return () => {
    controller.abort();
  };
}, [dependency]);
```

### 3. è‡ªå®šä¹‰ Hooks

- æå–å¤ç”¨é€»è¾‘åˆ°è‡ªå®šä¹‰ Hooks
- éµå¾ª Hook å‘½åè§„èŒƒï¼ˆä»¥ use å¼€å¤´ï¼‰
- å‚è€ƒ [react-web/src/hooks/useErrorHandler.js](mdc:react-web/src/hooks/useErrorHandler.js)

```jsx
// è‡ªå®šä¹‰ Hook ç¤ºä¾‹
const useApi = (url, options = {}) => {
  const [data, setData] = useState(null);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);

  useEffect(() => {
    // API è°ƒç”¨é€»è¾‘
  }, [url]);

  return { data, loading, error };
};
```

## ğŸ¨ æ ·å¼å’Œ UI è§„èŒƒ

### 1. Tailwind CSS ä½¿ç”¨

- ä¼˜å…ˆä½¿ç”¨ Tailwind åŸå­åŒ–ç±»å
- ä¿æŒæ ·å¼çš„ä¸€è‡´æ€§å’Œå¯ç»´æŠ¤æ€§
- ä½¿ç”¨å“åº”å¼å‰ç¼€å¤„ç†ä¸åŒå±å¹•å°ºå¯¸

```jsx
const Card = ({ children, className = "" }) => {
  return (
    <div
      className={`
      bg-white 
      rounded-lg 
      shadow-md 
      p-6 
      hover:shadow-lg 
      transition-shadow
      ${className}
    `}
    >
      {children}
    </div>
  );
};
```

### 2. Ant Design é›†æˆ

- åˆç†ä½¿ç”¨ Ant Design ç»„ä»¶
- éµå¾ª Ant Design çš„è®¾è®¡è§„èŒƒ
- é€šè¿‡ ConfigProvider ç»Ÿä¸€é…ç½®ä¸»é¢˜

```jsx
import { Button, Card, Table } from "antd";

const UserList = () => {
  return (
    <Card title="ç”¨æˆ·åˆ—è¡¨">
      <Table
        dataSource={users}
        columns={columns}
        pagination={{
          pageSize: 10,
          showSizeChanger: true,
          showQuickJumper: true,
        }}
      />
    </Card>
  );
};
```

### 3. å“åº”å¼è®¾è®¡

- ä½¿ç”¨ Tailwind çš„å“åº”å¼å‰ç¼€
- è€ƒè™‘ç§»åŠ¨ç«¯ç”¨æˆ·ä½“éªŒ
- æµ‹è¯•ä¸åŒå±å¹•å°ºå¯¸çš„æ˜¾ç¤ºæ•ˆæœ

```jsx
const ResponsiveGrid = () => {
  return (
    <div
      className="
      grid 
      grid-cols-1 
      md:grid-cols-2 
      lg:grid-cols-3 
      gap-4 
      p-4
    "
    >
      {/* ç½‘æ ¼é¡¹ç›® */}
    </div>
  );
};
```

## ğŸ”„ çŠ¶æ€ç®¡ç†æ¨¡å¼

### 1. å±€éƒ¨çŠ¶æ€

- ä½¿ç”¨ `useState` ç®¡ç†ç»„ä»¶å†…éƒ¨çŠ¶æ€
- çŠ¶æ€æå‡ï¼šå°†å…±äº«çŠ¶æ€æå‡åˆ°æœ€è¿‘çš„å…±åŒçˆ¶ç»„ä»¶

### 2. å…¨å±€çŠ¶æ€

- å¯¹äºå¤æ‚çš„å…¨å±€çŠ¶æ€ï¼Œè€ƒè™‘ä½¿ç”¨ Context API
- è°¨æ…ä½¿ç”¨ï¼Œé¿å…è¿‡åº¦ä½¿ç”¨ Context

```jsx
// ç”¨æˆ·ä¸Šä¸‹æ–‡ç¤ºä¾‹
const UserContext = createContext();

export const UserProvider = ({ children }) => {
  const [user, setUser] = useState(null);

  return (
    <UserContext.Provider value={{ user, setUser }}>
      {children}
    </UserContext.Provider>
  );
};

export const useUser = () => {
  const context = useContext(UserContext);
  if (!context) {
    throw new Error("useUser must be used within UserProvider");
  }
  return context;
};
```

## ğŸ“ æ–‡ä»¶ç»„ç»‡è§„èŒƒ

### 1. ç»„ä»¶æ–‡ä»¶ç»“æ„

```
components/
â”œâ”€â”€ Layout/
â”‚   â”œâ”€â”€ index.jsx          # ä¸»ç»„ä»¶
â”‚   â”œâ”€â”€ Header.jsx         # å­ç»„ä»¶
â”‚   â”œâ”€â”€ Sidebar.jsx        # å­ç»„ä»¶
â”‚   â””â”€â”€ styles.module.css  # æ ·å¼æ–‡ä»¶ï¼ˆå¦‚éœ€è¦ï¼‰
```

### 2. é¡µé¢æ–‡ä»¶ç»“æ„

```
pages/
â”œâ”€â”€ UserManagement/
â”‚   â”œâ”€â”€ index.jsx          # ä¸»é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ UserList.jsx       # ç”¨æˆ·åˆ—è¡¨ç»„ä»¶
â”‚   â”œâ”€â”€ UserForm.jsx       # ç”¨æˆ·è¡¨å•ç»„ä»¶
â”‚   â””â”€â”€ hooks/
â”‚       â””â”€â”€ useUserData.js # é¡µé¢ä¸“ç”¨ hooks
```

### 3. å‘½åè§„èŒƒ

- ç»„ä»¶æ–‡ä»¶ä½¿ç”¨ PascalCaseï¼š`UserProfile.jsx`
- Hook æ–‡ä»¶ä½¿ç”¨ camelCaseï¼š`useUserData.js`
- å·¥å…·å‡½æ•°ä½¿ç”¨ camelCaseï¼š`formatDate.js`

## ğŸ” æ€§èƒ½ä¼˜åŒ–

### 1. ç»„ä»¶ä¼˜åŒ–

- ä½¿ç”¨ `React.memo` é¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“
- ä½¿ç”¨ `useMemo` å’Œ `useCallback` ä¼˜åŒ–è®¡ç®—å’Œå‡½æ•°

```jsx
const UserItem = React.memo(({ user, onUpdate }) => {
  const handleUpdate = useCallback(() => {
    onUpdate(user.id);
  }, [user.id, onUpdate]);

  return (
    <div>
      {/* ç”¨æˆ·ä¿¡æ¯ */}
      <Button onClick={handleUpdate}>æ›´æ–°</Button>
    </div>
  );
});
```

### 2. æ‡’åŠ è½½

- ä½¿ç”¨ `React.lazy` å’Œ `Suspense` å®ç°ä»£ç åˆ†å‰²
- æŒ‰è·¯ç”±è¿›è¡Œç»„ä»¶æ‡’åŠ è½½

```jsx
const UserManagement = React.lazy(() => import("@/pages/UserManagement"));

const App = () => {
  return (
    <Suspense fallback={<div>Loading...</div>}>
      <UserManagement />
    </Suspense>
  );
};
```

## ğŸ§ª æµ‹è¯•è§„èŒƒ

### 1. ç»„ä»¶æµ‹è¯•

- ç¼–å†™å•å…ƒæµ‹è¯•éªŒè¯ç»„ä»¶è¡Œä¸º
- æµ‹è¯•ç”¨æˆ·äº¤äº’å’ŒçŠ¶æ€å˜åŒ–
- ä½¿ç”¨ React Testing Library

### 2. æµ‹è¯•åŸåˆ™

- æµ‹è¯•ç”¨æˆ·å¯è§çš„è¡Œä¸ºï¼Œè€Œéå®ç°ç»†èŠ‚
- ä¿æŒæµ‹è¯•ç®€å•å’Œå¯ç»´æŠ¤
- è¿½æ±‚åˆç†çš„æµ‹è¯•è¦†ç›–ç‡
